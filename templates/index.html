<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<div class="container mt-3">
  <h2>Color Picker</h2>
  <p>You can change the arduino led color here</p>
  <form>
    <label class="form-label">Color picker</label>
    <div class="input-group mb-3" style="width: 500px;">
      <input type="text" class="form-control" id="color" onchange="change()" value="{{x}}">
      <input type="color" class="form-control form-control-color group-input-text" value="{{x}}" title="Choose a color" id="color2" onchange="change()" style="width: 20px;">
    </div>
    <button type="button" class="btn btn-outline-success" onclick="fu()">Submit</button>
  </form>
</div>
<script>
  function change(){
    let focusedElement = document.activeElement;

    if (focusedElement == "color"){
      document.getElementById("color2").value = document.getElementById("color").value
    } else {
      document.getElementById("color").value = document.getElementById("color2").value
    }
     console.log(focusedElement)
  }

  const fu = () => {
			fetch(
				"/api", {
        			method: 'POST',
        			headers: { // Add a headers property
                		'Content-Type': 'application/json' // Set the Content-Type to application/json
            		},
        			body: JSON.stringify({
						"color": document.getElementById("color2").value,
					}) // Data to send, often as a JSON string
      			}
			)
			.then(response => {
				if (!response.ok) {
					throw new Error(`HTTP error! Status: ${response.status}`);	
				}		
				return response.text(); // Or response.text() for non-JSON responses	
			})	
			.then(data => {
				// Handle the response data here	
				console.log(data); 		
			})
		}  

 
</script>

</body>
</html>
